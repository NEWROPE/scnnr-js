!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).scnnr=t()}(this,function(){"use strict";function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function u(e,t,n){return(u=o()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&s(o,n.prototype),o}).apply(null,arguments)}function t(e){var n="function"==typeof Map?new Map:void 0;return(t=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return u(e,arguments,a(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),s(t,e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(i){var s=o();return function(){var e,t,n,r,o=a(i);return t=s?(e=a(this).constructor,Reflect.construct(o,arguments,e)):o.apply(this,arguments),n=this,!(r=t)||"object"!=typeof r&&"function"!=typeof r?l(n):r}}function c(n,r){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return n.apply(r,e)}}var n={url:"https://api.scnnr.cubki.jp/",version:"v1",timeout:null,apiKey:null},h=Object.prototype.toString;function d(e){return"[object Array]"===h.call(e)}function m(e){return void 0===e}function y(e){return null!==e&&"object"==typeof e}function v(e){if("[object Object]"!==h.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function g(e){return"[object Function]"===h.call(e)}function b(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),d(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var w={isArray:d,isArrayBuffer:function(e){return"[object ArrayBuffer]"===h.call(e)},isBuffer:function(e){return null!==e&&!m(e)&&null!==e.constructor&&!m(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){var t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer;return t},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:y,isPlainObject:v,isUndefined:m,isDate:function(e){return"[object Date]"===h.call(e)},isFile:function(e){return"[object File]"===h.call(e)},isBlob:function(e){return"[object Blob]"===h.call(e)},isFunction:g,isStream:function(e){return y(e)&&g(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:b,merge:function n(){var r={};function e(e,t){v(r[t])&&v(e)?r[t]=n(r[t],e):v(e)?r[t]=n({},e):d(e)?r[t]=e.slice():r[t]=e}for(var t=0,o=arguments.length;t<o;t++)b(arguments[t],e);return r},extend:function(n,e,r){return b(e,function(e,t){n[t]=r&&"function"==typeof e?c(e,r):e}),n},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}};function k(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function R(e,t,n){if(!t)return e;var r,o,i=n?n(t):w.isURLSearchParams(t)?t.toString():(r=[],w.forEach(t,function(e,t){null!=e&&(w.isArray(e)?t+="[]":e=[e],w.forEach(e,function(e){w.isDate(e)?e=e.toISOString():w.isObject(e)&&(e=JSON.stringify(e)),r.push(k(t)+"="+k(e))}))}),r.join("&"));return i&&(-1!==(o=e.indexOf("#"))&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+i),e}function E(){this.handlers=[]}E.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},E.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},E.prototype.forEach=function(t){w.forEach(this.handlers,function(e){null!==e&&t(e)})};function P(t,n,e){return w.forEach(e,function(e){t=e(t,n)}),t}function j(e){return!(!e||!e.__CANCEL__)}function x(n,r){w.forEach(n,function(e,t){t!==r&&t.toUpperCase()===r.toUpperCase()&&(n[r]=e,delete n[t])})}function O(e,t,n,r,o){var i,s,a,u,c=new Error(e);return s=n,a=r,u=o,(i=c).config=t,s&&(i.code=s),i.request=a,i.response=u,i.isAxiosError=!0,i.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},i}var T,C,S,A=E,q=w.isStandardBrowserEnv()?{write:function(e,t,n,r,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),w.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),w.isString(r)&&s.push("path="+r),w.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},U=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],B=w.isStandardBrowserEnv()?(C=/(msie|trident)/i.test(navigator.userAgent),S=document.createElement("a"),T=N(window.location.href),function(e){var t=w.isString(e)?N(e):e;return t.protocol===T.protocol&&t.host===T.host}):function(){return!0};function N(e){var t=e;return C&&(S.setAttribute("href",t),t=S.href),S.setAttribute("href",t),{href:S.href,protocol:S.protocol?S.protocol.replace(/:$/,""):"",host:S.host,search:S.search?S.search.replace(/^\?/,""):"",hash:S.hash?S.hash.replace(/^#/,""):"",hostname:S.hostname,port:S.port,pathname:"/"===S.pathname.charAt(0)?S.pathname:"/"+S.pathname}}function _(h){return new Promise(function(f,l){var n=h.data,r=h.headers;w.isFormData(n)&&delete r["Content-Type"],(w.isBlob(n)||w.isFile(n))&&n.type&&delete r["Content-Type"];var e,t,p=new XMLHttpRequest;h.auth&&(e=h.auth.username||"",t=unescape(encodeURIComponent(h.auth.password))||"",r.Authorization="Basic "+btoa(e+":"+t));var o,i,s,a,u,c=(i=h.url,(o=h.baseURL)&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(i)?(s=o,(a=i)?s.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,""):s):i);if(p.open(h.method.toUpperCase(),R(c,h.params,h.paramsSerializer),!0),p.timeout=h.timeout,p.onreadystatechange=function(){var e,t,n,r,o,i,s,a,u,c;p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&(e="getAllResponseHeaders"in p?(t=p.getAllResponseHeaders(),i={},t&&w.forEach(t.split("\n"),function(e){if(o=e.indexOf(":"),n=w.trim(e.substr(0,o)).toLowerCase(),r=w.trim(e.substr(o+1)),n){if(i[n]&&0<=U.indexOf(n))return;i[n]="set-cookie"===n?(i[n]?i[n]:[]).concat([r]):i[n]?i[n]+", "+r:r}}),i):null,s=f,a=l,c=(u={data:h.responseType&&"text"!==h.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:e,config:h,request:p}).config.validateStatus,u.status&&c&&!c(u.status)?a(O("Request failed with status code "+u.status,u.config,null,u.request,u)):s(u),p=null)},p.onabort=function(){p&&(l(O("Request aborted",h,"ECONNABORTED",p)),p=null)},p.onerror=function(){l(O("Network Error",h,null,p)),p=null},p.ontimeout=function(){l(O(h.timeoutErrorMessage?h.timeoutErrorMessage:"timeout of "+h.timeout+"ms exceeded",h,"ECONNABORTED",p)),p=null},!w.isStandardBrowserEnv()||(u=(h.withCredentials||B(c))&&h.xsrfCookieName?q.read(h.xsrfCookieName):void 0)&&(r[h.xsrfHeaderName]=u),"setRequestHeader"in p&&w.forEach(r,function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete r[t]:p.setRequestHeader(t,e)}),w.isUndefined(h.withCredentials)||(p.withCredentials=!!h.withCredentials),h.responseType)try{p.responseType=h.responseType}catch(e){if("json"!==h.responseType)throw e}"function"==typeof h.onDownloadProgress&&p.addEventListener("progress",h.onDownloadProgress),"function"==typeof h.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",h.onUploadProgress),h.cancelToken&&h.cancelToken.promise.then(function(e){p&&(p.abort(),l(e),p=null)}),p.send(n=n||null)})}var D={"Content-Type":"application/x-www-form-urlencoded"};function I(e,t){!w.isUndefined(e)&&w.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var L,F={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(L=_),L),transformRequest:[function(e,t){return x(t,"Accept"),x(t,"Content-Type"),w.isFormData(e)||w.isArrayBuffer(e)||w.isBuffer(e)||w.isStream(e)||w.isFile(e)||w.isBlob(e)?e:w.isArrayBufferView(e)?e.buffer:w.isURLSearchParams(e)?(I(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):w.isObject(e)?(I(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};w.forEach(["delete","get","head"],function(e){F.headers[e]={}}),w.forEach(["post","put","patch"],function(e){F.headers[e]=w.merge(D)});var z=F;function K(e){e.cancelToken&&e.cancelToken.throwIfRequested()}function H(t){return K(t),t.headers=t.headers||{},t.data=P(t.data,t.headers,t.transformRequest),t.headers=w.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),w.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||z.adapter)(t).then(function(e){return K(t),e.data=P(e.data,e.headers,t.transformResponse),e},function(e){return j(e)||(K(t),e&&e.response&&(e.response.data=P(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}function M(t,n){n=n||{};var r={},e=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function a(e,t){return w.isPlainObject(e)&&w.isPlainObject(t)?w.merge(e,t):w.isPlainObject(t)?w.merge({},t):w.isArray(t)?t.slice():t}function u(e){w.isUndefined(n[e])?w.isUndefined(t[e])||(r[e]=a(void 0,t[e])):r[e]=a(t[e],n[e])}w.forEach(e,function(e){w.isUndefined(n[e])||(r[e]=a(void 0,n[e]))}),w.forEach(o,u),w.forEach(i,function(e){w.isUndefined(n[e])?w.isUndefined(t[e])||(r[e]=a(void 0,t[e])):r[e]=a(void 0,n[e])}),w.forEach(s,function(e){e in n?r[e]=a(t[e],n[e]):e in t&&(r[e]=a(void 0,t[e]))});var c=e.concat(o).concat(i).concat(s),f=Object.keys(t).concat(Object.keys(n)).filter(function(e){return-1===c.indexOf(e)});return w.forEach(f,u),r}function J(e){this.defaults=e,this.interceptors={request:new A,response:new A}}J.prototype.request=function(e,t){"string"==typeof e?(e=t||{}).url=arguments[0]:e=e||{},(e=M(this.defaults,e)).method=e.method?e.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var n=[H,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},J.prototype.getUri=function(e){return e=M(this.defaults,e),R(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},w.forEach(["delete","get","head","options"],function(n){J.prototype[n]=function(e,t){return this.request(M(t||{},{method:n,url:e}))}}),w.forEach(["post","put","patch"],function(r){J.prototype[r]=function(e,t,n){return this.request(M(n||{},{method:r,url:e,data:t}))}});var V=J;function X(e){this.message=e}X.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},X.prototype.__CANCEL__=!0;var $=X;function G(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new $(e),t(n.reason))})}G.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},G.source=function(){var t;return{token:new G(function(e){t=e}),cancel:t}};var Q=G;function W(e){var t=new V(e),n=c(V.prototype.request,t);return w.extend(n,V.prototype,t),w.extend(n,t),n}var Y=W(z);Y.Axios=V,Y.create=function(e){return W(M(Y.defaults,e))},Y.Cancel=$,Y.CancelToken=Q,Y.isCancel=j,Y.all=function(e){return Promise.all(e)},Y.spread=function(t){return function(e){return t.apply(null,e)}};var Z=Y;Z.default=Y;var ee=Z,te=function(){e(r,t(Error));var n=p(r);function r(e){var t;return f(this,r),t=n.call(this,e),Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(l(t),r):t.stack=(new Error).stack,t}return r}(),ne=function(){e(r,te);var n=p(r);function r(e){var t;return f(this,r),(t=n.call(this,e)).name="PollTimeout",t}return r}(),re=function(){e(r,te);var n=p(r);function r(e){var t;return f(this,r),(t=n.call(this,e)).name="PreconditionFailed",t}return r}();function oe(e,t,n){var r="";return e&&(r="[".concat(e,"]")),t&&(r="".concat(r," ").concat(t)),n&&(r="".concat(r," (").concat(n,")")),r}var ie=function(){e(c,te);var u=p(c);function c(e){var t=e.title,n=e.detail,r=e.type,o=e.statusCode,i=e.rawResponse;f(this,c);var s,a=oe(t,n,r);return(s=u.call(this,a)).name="ScnnrAPIError",Object.assign(l(s),{title:t,detail:n,type:r,statusCode:o,rawResponse:i}),s}return c}(),se=function(){e(u,te);var a=p(u);function u(e,t){var n=e.title,r=e.detail,o=e.type;f(this,u);var i,s=oe(n,r,o);return(i=a.call(this,s)).name="RecognitionError",Object.assign(l(i),{title:n,detail:r,type:o,recognition:t}),i}return u}(),ae=Object.freeze({__proto__:null,ScnnrError:te,PollTimeout:ne,PreconditionFailed:re,ScnnrAPIError:ie,RecognitionError:se}),ue=function(){function e(){f(this,e),this.interceptRequest=this.interceptRequest.bind(this)}return i(e,[{key:"interceptRequest",value:function(e){return Promise.resolve(e)}}]),e}(),ce=function(){e(r,ue);var n=p(r);function r(e){var t;return f(this,r),(t=n.call(this)).apiKey=e,t}return i(r,[{key:"interceptRequest",value:function(t){var n=this;return new Promise(function(e){t.headers["x-api-key"]=n.apiKey,e(t)})}}]),r}(),fe=function(){function n(e,t){f(this,n),this.value=e,this.expiresIn=t,this.expiresAt=new Date(Date.now()+1e3*t)}return i(n,[{key:"hasExpired",value:function(e){var t=0<arguments.length&&void 0!==e?e:0;return Date.now()>=this.expiresAt.getTime()-t}}]),n}();function le(e){switch(e.type){case"one-time":return new fe(e.value,e.expires_in);default:return null}}var pe=Object.freeze({__proto__:null,OneTimeToken:fe,buildToken:le}),he=function(){function n(e,t){f(this,n),this.publicAPIKey=e,this.options=t,this.token=null,this.timeout=null,this.marginToExpire=.05}return i(n,[{key:"get",value:function(){var e=this;return this.issue().then(function(){return e.getAndClearToken()})}},{key:"issue",value:function(){var t=this;return this.hasValidToken()?Promise.resolve():this.requestToken().then(function(e){t.token=e})}},{key:"requestToken",value:function(){return ge.build(!0,Object.assign({},this.options,{apiKey:this.publicAPIKey})).sendJson("/auth/tokens",{type:"one-time"}).then(function(e){return le(e.data)})}},{key:"hasValidToken",value:function(){return null!=this.token&&!this.token.hasExpired(this.token.expiresIn*this.marginToExpire*1e3)}},{key:"getAndClearToken",value:function(){var e=this.token;return this.token=null,e}}]),n}(),de=function(){e(o,ue);var r=p(o);function o(e,t){var n;return f(this,o),(n=r.call(this)).oneTimeTokenProvider=new he(e,t),n}return i(o,[{key:"interceptRequest",value:function(t){return this.oneTimeTokenProvider.get().then(function(e){return t.headers["x-api-key"]="use-scnnr-one-time-token",t.headers["x-scnnr-one-time-token"]=e.value,t})}}]),o}();function me(e){return"string"!=typeof e||""===(e=e.replace(/^\s*/,"").replace(/\s*$/,""))?null:e}function ye(e){var t=me(e.apiKey),n=me(e.publicAPIKey);if(null!=t)return new ce(t);if(null!=n)return new de(n,{url:e.url,version:e.version});throw new re("`apiKey` or `publicAPIKey` configuration is required.")}function ve(e){var t=e.width,n=e.height;f(this,ve),this.width=t,this.height=n}var ge=function(){function u(e){var t=e.url,n=e.apiKey,r=e.params,o=e.authInterceptor,i=e.onUploadProgress,s=e.onDownloadProgress;f(this,u);var a={};n&&(a["x-api-key"]=n),this.httpClient=ee.create({params:r,headers:a,baseURL:t,onUploadProgress:i,onDownloadProgress:s}),this.httpClient.interceptors.response.use(function(e){return e},this.errorInterceptor),null!=o&&this.httpClient.interceptors.request.use(o.interceptRequest)}return i(u,[{key:"get",value:function(e){return this.httpClient.get(e,null)}},{key:"sendJson",value:function(e,t){return this.send(e,t,"application/json")}},{key:"sendBinary",value:function(e,t){return this.send(e,t,"application/octet-stream")}},{key:"send",value:function(e,t,n){return this.httpClient.post(e,t,{headers:{"Content-Type":n}})}},{key:"errorInterceptor",value:function(e){return e.response?Promise.reject(new ie({title:e.response.data.title||e.response.data.message,detail:e.response.data.detail||e.message,type:e.response.data.type,rawResponse:e.response.data,statusCode:e.response.status})):Promise.reject(e)}}],[{key:"build",value:function(e,t){var n=t.params||{};return 0<(t.timeout||0)&&(n.timeout=t.timeout),new u({params:n,authInterceptor:e?ye(t):null,url:t.url+t.version,onUploadProgress:t.onUploadProgress,onDownloadProgress:t.onDownloadProgress})}}]),u}(),be=function e(t){f(this,e),this.category=t.category,this.boundingBox=t.boundingBox||t.bounding_box,this.labels=t.labels},we=function e(t){var n=t.url,r=t.size;f(this,e),this.url=n,this.size=new ve(r)};we.Size=ve;var ke=function(){function s(e){var t=e.id,n=e.objects,r=e.state,o=e.image,i=e.error;f(this,s),this.id=t,this.objects=(n||[]).map(function(e){return new be(e)}),this.state=r,null!=o&&(this.image=new we(o)),this.error=i}return i(s,[{key:"isFinished",value:function(){return"finished"===this.state}},{key:"hasError",value:function(){return!!this.error}}]),s}();function Re(e){var n=this,r=e.requestFunc,o=e.conditionChecker,i=e.remainingTime,s=(i||0)-25<0?i:25;return new Promise(function(t,e){return i<=0?e(new ne("Polling timed out")):r({timeout:s}).then(function(e){return o(e)?t(e):t(Re.call(n,{requestFunc:r,conditionChecker:o,remainingTime:i-s}))})})}ke.Item=be,ke.Image=we;var Ee=function(){function t(e){f(this,t),this.config=Object.assign({},n,e)}return i(t,[{key:"recognizeURL",value:function(t,e){var n=this;return this.recognizeRequest(function(e){return n.connection(!0,e).sendJson("/remote/recognitions",{url:t})},1<arguments.length&&void 0!==e?e:{})}},{key:"recognizeImage",value:function(t,e){var n=this,r=1<arguments.length&&void 0!==e?e:{},o=Object.assign({},r,{params:{public:r.public}});return this.recognizeRequest(function(e){return n.connection(!0,e).sendBinary("/recognitions",t)},o)}},{key:"recognizeRequest",value:function(e,n){var r=this,o=function(e,t){var n=0<arguments.length&&void 0!==e?e:0,r=1<arguments.length?t:void 0;return n-r<0?n:r}(n.timeout,25),i=e(Object.assign({},n,{timeout:o}));return new Promise(function(e,t){i.then(r.handleResponse).then(function(t){return 0<(n.timeout||0)&&!t.isFinished()?Re({requestFunc:function(e){return r.fetch(t.id,e)},conditionChecker:function(e){return e.isFinished()},remainingTime:n.timeout-o}):e(t)}).then(e).catch(t)})}},{key:"fetch",value:function(e,t){return this.connection(!1,1<arguments.length&&void 0!==t?t:{}).get("/recognitions/".concat(e)).then(this.handleResponse)}},{key:"handleResponse",value:function(e){var t=new ke(e.data);if(t.hasError())throw new se(t.error,t);return t}},{key:"connection",value:function(e,t){return ge.build(e,Object.assign({},this.config,t))}}]),t}();return Object.assign(function(e){return new Ee(e)},{Client:Ee,Connection:ge,Recognition:ke,PrivateKeyAuthInterceptor:ce,PublicKeyAuthInterceptor:de,authInterceptor:ye,OneTimeTokenProvider:he},pe,ae)});
